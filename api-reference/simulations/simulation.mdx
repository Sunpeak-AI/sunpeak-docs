---
title: "Simulation"
description: "Type definition for packaging components with MCP metadata and example data for testing and development"
---

import CreateSimulation from '/snippets/create-simulation.mdx';

## Overview

`Simulation` is a TypeScript interface that packages a React component with its MCP (Model Context Protocol) metadata and example data. Each simulation represents a complete tool experience in the simulator and MCP server, combining the component, tool definition, resource definition, and mock call data.

Simulations are used for local testing with the ChatGPT Simulator and for configuring MCP servers.

## Import

```tsx
import type { Simulation } from 'sunpeak';
```

## Basic Usage

<CreateSimulation />

## Properties

<ResponseField name="resourceComponent" type="React.ComponentType" required>
  The React component to render in the simulator or MCP client. This component implements the UI for your tool.
</ResponseField>

<ResponseField name="userMessage" type="string">
  A decorative message shown in the simulator interface. Has no functional purpose and is used only for UI presentation.
</ResponseField>

<ResponseField name="simulationGlobals" type="SimulationGlobals">
  Configuration for the simulator environment including theme, locale, display mode, and other runtime values. See [SimulationGlobals](#simulationglobals-interface) below for details.
</ResponseField>

<ResponseField name="tool" type="Tool" required>
  Official MCP SDK Tool type used in the ListTools response. Defines the tool's name, description, input schema, and metadata including OpenAI-specific annotations.

  **Key properties:**
  - `name`: Unique identifier for the tool.
  - `description`: Human-readable description.
  - `inputSchema`: JSON Schema for tool input validation.
  - `title`: Display name.
  - `annotations`: Tool behavior hints (e.g., `readOnlyHint`).
  - `_meta`: Platform-specific metadata (e.g., OpenAI widget configuration).
</ResponseField>

<ResponseField name="resource" type="Resource" required>
  Official MCP SDK Resource type used in the ListResources response. Defines the resource URI, name, and metadata.

  **Key properties:**
  - `uri`: Resource URI (e.g., `ui://MyComponent.tsx`).
  - `name`: Simulation identifier (used internally).
  - `title`: Display label for the simulation.
  - `description`: Human-readable description.
  - `mimeType`: Always `text/html+skybridge` for UI resources.
  - `_meta`: Additional metadata.
</ResponseField>

<ResponseField name="toolCall" type="SimulationCallToolResult">
  Mock data for the MCP CallTool response. Used by the simulator to provide example structured content and metadata. See [SimulationCallToolResult](#simulationcalltoolresult-interface) below for details.
</ResponseField>

## Related Types

### SimulationGlobals Interface

Configures the simulator environment with initial values for development and testing.

<ResponseField name="theme" type="Theme">
  Theme setting: `'light'` or `'dark'`.
</ResponseField>

<ResponseField name="userAgent" type="UserAgent">
  Device/platform information.
</ResponseField>

<ResponseField name="locale" type="string">
  Locale string (e.g., `'en-US'`).
</ResponseField>

<ResponseField name="maxHeight" type="number">
  Maximum widget height in pixels.
</ResponseField>

<ResponseField name="displayMode" type="DisplayMode">
  Display mode: `'full'` or `'compact'`.
</ResponseField>

<ResponseField name="safeArea" type="SafeArea">
  Safe area insets.
</ResponseField>

<ResponseField name="view" type="View | null">
  Current view context.
</ResponseField>

<ResponseField name="toolInput" type="Record<string, unknown>">
  Tool input parameters.
</ResponseField>

<ResponseField name="widgetState" type="Record<string, unknown> | null">
  Widget state data.
</ResponseField>

**Note:** `toolOutput` (`structuredContent`) and `toolResponseMetadata` (`_meta`) are set in `SimulationCallToolResult` instead of `SimulationGlobals`.

### SimulationCallToolResult Interface

Subset of the MCP CallTool response used in simulations to provide mock structured content and metadata.

<ResponseField name="structuredContent" type="Record<string, unknown> | null">
  Tool output data.
</ResponseField>

<ResponseField name="_meta" type="Record<string, unknown>">
  Response metadata.
</ResponseField>

## Examples

### Simple Counter Simulation

```tsx
export const counterSimulation: Simulation = {
  resourceComponent: Counter,
  userMessage: 'Help me count something',

  tool: {
    name: 'show-counter',
    description: 'Show a simple counter tool',
    inputSchema: { type: 'object', properties: {}, additionalProperties: false },
    title: 'Show Counter',
    annotations: { readOnlyHint: true },
    _meta: {
      'openai/outputTemplate': 'ui://CounterResource.tsx',
      'openai/toolInvocation/invoking': 'Counting beans',
      'openai/toolInvocation/invoked': 'Beans counted',
      'openai/widgetAccessible': true,
      'openai/resultCanProduceWidget': true,
    },
  },

  resource: {
    uri: 'ui://CounterResource.tsx',
    name: 'counter',
    title: 'Counter',
    description: 'Show a simple counter tool widget markup',
    mimeType: 'text/html+skybridge',
    _meta: {},
  },

  toolCall: {
    structuredContent: null,
    _meta: {},
  },
};
```

### Simulation with Globals and Data

```tsx
export const albumsSimulation: Simulation = {
  resourceComponent: Albums,
  userMessage: 'Show me some albums',

  simulationGlobals: {
    theme: 'dark',
    displayMode: 'full',
    locale: 'en-US',
  },

  tool: {
    name: 'show-albums',
    description: 'Display a collection of albums',
    inputSchema: {
      type: 'object',
      properties: {
        genre: { type: 'string' }
      },
      additionalProperties: false
    },
    title: 'Show Albums',
    annotations: { readOnlyHint: true },
    _meta: {
      'openai/outputTemplate': 'ui://AlbumsResource.tsx',
      'openai/widgetAccessible': true,
      'openai/resultCanProduceWidget': true,
    },
  },

  resource: {
    uri: 'ui://AlbumsResource.tsx',
    name: 'albums',
    title: 'Albums',
    description: 'Album collection widget',
    mimeType: 'text/html+skybridge',
    _meta: {},
  },

  toolCall: {
    structuredContent: {
      albums: [
        { title: 'Album 1', artist: 'Artist 1' },
        { title: 'Album 2', artist: 'Artist 2' },
      ]
    },
    _meta: { count: 2 },
  },
};
```
