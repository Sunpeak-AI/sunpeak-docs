---
title: "useWidgetAPI"
description: "Access the widget runtime API"
---

## Overview

The `useWidgetAPI` hook provides access to the widget runtime API, which includes methods for calling tools, sending messages, and controlling the widget display.

## Import

```tsx
import { useWidgetAPI } from 'sunpeak';
```

## Signature

```tsx
function useWidgetAPI(): WidgetAPI | null
```

## Returns

<ResponseField name="return" type="WidgetAPI | null">
  The API object with methods, or `null` if not available.
</ResponseField>

## API Methods

<ResponseField name="callTool" type="(name: string, args: unknown) => Promise<unknown>">
  Invoke an MCP tool.
</ResponseField>

<ResponseField name="sendFollowUpMessage" type="({ prompt }: { prompt: string }) => void">
  Send a follow-up message to the chat.
</ResponseField>

<ResponseField name="openExternal" type="({ href }: { href: string }) => void">
  Open an external URL.
</ResponseField>

<ResponseField name="requestDisplayMode" type="({ mode }: { mode: DisplayMode }) => void">
  Request a display mode change.
</ResponseField>

<ResponseField name="requestModal" type="({ mode, params }: { mode: string, params?: Record<string, unknown> }) => void">
  Request modal view.
</ResponseField>

<ResponseField name="notifyIntrinsicHeight" type="(height: number) => void">
  Notify the platform of content height.
</ResponseField>

## Usage

```tsx
import { useWidgetAPI } from 'sunpeak';

function MyWidget() {
  const api = useWidgetAPI();

  const handleAction = async () => {
    if (api) {
      const result = await api.callTool('my-tool', { arg: 'value' });
      console.log(result);
    }
  };

  return <button onClick={handleAction}>Call Tool</button>;
}
```
